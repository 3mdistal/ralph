{"schemaVersion":1,"domain":"gates","id":"branches.bot-rollup","surface":"git","path":"branches","claim":"Ralph-generated PRs target `bot/integration`; human review happens via rollup PRs to `main`.","status":"planned","source":"docs/product/vision.md"}
{"schemaVersion":1,"domain":"orchestration","id":"principle.minimize-interrupts","surface":"product","path":"principles","claim":"Ralph minimizes human interrupt surface: proceed autonomously and escalate only when human intervention is required.","status":"planned","source":"docs/product/vision.md"}
{"schemaVersion":1,"domain":"orchestration","id":"queue.github-first","surface":"github","path":"issues","claim":"GitHub Issues + comments are the operator UX and source of truth for queue membership.","status":"planned","source":"docs/product/vision.md"}
{"schemaVersion":1,"domain":"orchestration","id":"routing.json-decision","surface":"text","path":"docs/escalation-policy.md#routing-decision","claim":"Agents output a routing decision as machine-parseable JSON with keys decision, confidence, and escalation_reason.","status":"planned","source":"docs/escalation-policy.md"}
{"schemaVersion":1,"domain":"opencode","id":"opencode.managed-config","surface":"filesystem","path":"$HOME/.ralph/opencode","claim":"Ralph daemon runs ignore repo-local OpenCode config and use a Ralph-managed config dir (`$HOME/.ralph/opencode`) unless explicitly overridden.","status":"implemented","source":"docs/ops/opencode-managed-config.md"}
{"schemaVersion":1,"domain":"orchestration","id":"labels.cmd-surface","surface":"github","path":"labels/ralph:cmd:*","claim":"Operator intent is expressed via `ralph:cmd:*` labels and normal GitHub comments; commands are processed idempotently and removed.","status":"planned","source":"docs/product/orchestration-contract.md"}
{"schemaVersion":1,"domain":"orchestration","id":"labels.no-touch-non-ralph","surface":"github","path":"labels","claim":"Ralph never edits non-`ralph:*` labels.","status":"planned","source":"docs/product/orchestration-contract.md"}
{"schemaVersion":1,"domain":"orchestration","id":"labels.single-status","surface":"github","path":"labels/ralph:status:*","claim":"Ralph never intentionally sets multiple `ralph:status:*` labels; on any successful reconciliation pass it enforces exactly one status label. Temporary drift due to partial GitHub write failures is tolerated but must converge.","status":"planned","source":"docs/product/orchestration-contract.md"}
{"schemaVersion":1,"domain":"orchestration","id":"watchdog.never-silent-stall","surface":"process","path":"watchdog","claim":"In daemon mode, Ralph must never silently stall on a hung tool call; it uses a soft timeout heartbeat and a hard timeout that kills the run, re-queues once with cleared session id, then escalates if it repeats.","status":"planned","source":"docs/product/vision.md"}
{"schemaVersion":1,"domain":"orchestration","id":"diagnostics.redaction-local-only","surface":"policy","path":"diagnostics","claim":"Crash diagnostics may include a bounded, redacted log tail; redact obvious tokens and home-directory paths, and do not post logs externally without manual review.","status":"planned","source":"docs/product/vision.md"}
{"schemaVersion":1,"domain":"orchestration","id":"product-gap.markers.regex","surface":"text","path":"docs/escalation-policy.md#product-gap-markers","claim":"Product gaps are asserted only via explicit line-start markers `PRODUCT GAP:` / `NO PRODUCT GAP:` matched deterministically (example regex: `^\\s*(?:[-*]\\s+)?(NO\\s+)?PRODUCT\\s+GAP:\\s+`).","status":"implemented","source":"docs/escalation-policy.md"}
{"schemaVersion":1,"domain":"orchestration","id":"product-gap.marker-precedence","surface":"policy","path":"docs/escalation-policy.md#product-gap-markers","claim":"Marker precedence: (1) `NO PRODUCT GAP:` negates product-gap assertions even if `PRODUCT GAP:` appears elsewhere; (2) if a product-gap marker is present, it overrides routing JSON and forces escalation.","status":"planned","source":"docs/escalation-policy.md"}
{"schemaVersion":1,"domain":"orchestration","id":"escalate.only-when-needs-human","surface":"policy","path":"docs/escalation-policy.md#when-to-escalate","claim":"Ralph escalates only when it cannot make forward progress without human intervention. Default: attempt at least one bounded self-heal/retry before escalating, except for explicit product-gap markers.","status":"planned","source":"docs/escalation-policy.md"}
{"schemaVersion":1,"domain":"orchestration","id":"escalate.contract-surface","surface":"policy","path":"docs/escalation-policy.md#contract-surface","claim":"Contract-surface questions use a hybrid policy: proceed when a change can be made additive and low-complexity; escalate when it would require a breaking change or would add unreasonable compatibility complexity.","status":"planned","source":"docs/escalation-policy.md"}
{"schemaVersion":1,"domain":"orchestration","id":"escalation.low-confidence-not-enough","surface":"policy","path":"docs/escalation-policy.md#low-confidence","claim":"Low confidence alone must not trigger escalation for routine tasks.","status":"planned","source":"docs/escalation-policy.md"}
{"schemaVersion":1,"domain":"orchestration","id":"escalation.resolution.cmd-queue","surface":"github","path":"labels/ralph:cmd:queue","claim":"Escalation resolution: operator replies normally, then applies `ralph:cmd:queue` to resume.","status":"planned","source":"docs/escalation-policy.md"}
{"schemaVersion":1,"domain":"state","id":"sqlite.forward-only","surface":"sqlite","path":"~/.ralph/state.sqlite","claim":"`~/.ralph/state.sqlite` is forward-only migrated on startup; if schema is newer than the binary expects, Ralph fails closed.","status":"implemented","source":"docs/ops/state-sqlite.md"}
{"schemaVersion":1,"domain":"throttle","id":"throttle.two-tier","surface":"process","path":"policy","claim":"Usage throttling is a daemon-level policy; hard throttle stops all model sends and soft throttle stops starting new tasks.","status":"implemented","source":"docs/product/usage-throttling.md"}
{"schemaVersion":1,"domain":"worktree","id":"worktree.isolated-execution","surface":"filesystem","path":"~/.ralph/worktrees","claim":"Task work executes in isolated git worktrees (not in the main checkout).","status":"implemented","source":"docs/product/worktree-management.md"}
